<html>

<head>
  <script src="./dist/esbuild/tensor-diagrams.js"></script>
  <link rel='stylesheet' href='./src/diagram.css'>
</head>

<body>
  <div id="firstcontainer" class="equation">
    <div class="eq-diagram">
    </div>
    <div class="eq-elem"> = ∑_ij</div>
    <div class="eq-elem tensor-eq-x">x_i</div>
    <div class="eq-elem tensor-eq-A">A_ij</div>
    <div class="eq-elem tensor-eq-B">B_jk</div>
  </div>
  <div id="simpler" class="equation"></div>
  <div id="simpler-formula" class="equation"></div>
  <script>
    const tensors = [
      {
        x: 0, y: 0, name: "x",
        indices: [
          { pos: "right", name: "i" },
        ]
      },
      {
        x: 1, y: 0, name: "A",
        indices: [
          { pos: "left", name: "i" },
          { pos: "right", name: "j" }
        ]
      },
      {
        x: 2, y: 0, name: "B",
        indices: [
          { pos: "left", name: "j" },
          { pos: "right", name: "k" }
        ]
      },
    ];

    const contractions = [
      { source: 0, target: 1, name: "i" },
      { source: 1, target: 2, name: "j" },
    ];

    const diagram = new TensorDiagram(tensors, contractions, []);
    diagram.setSize(220, 120).draw("#firstcontainer", false);

    TensorDiagram.new()
      .addTensor("x", "start", [], ["i"])
      .addTensor("A", "right", ["i"], ["j"])
      .addTensor("B", "right", ["j"], ["k"])
      .addContraction(0, 1, "i")
      .addContraction(1, 2, "j")
      .setSize(220, 120)
      .draw("#simpler");

    TensorDiagram.new()
      .addTensor("x", "start", [], ["i"])
      .addTensor("A", "right", ["i"], ["j"])
      .addTensor("B", "right", ["j"], ["k"])
      .addContraction(0, 1, "i")
      .addContraction(1, 2, "j")
      .setSize(220, 120)
      .draw("#simpler-formula", true, [
        { name: "", label: "= ∑_ij" },
        { name: "x", label: "x_i" },
        { name: "A", label: "A_ij" },
        { name: "B", label: "B_jk" },
      ]);

  </script>
</body>

</html>